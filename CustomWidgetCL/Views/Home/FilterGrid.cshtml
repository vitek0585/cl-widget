@{
    ViewBag.Title = "Home Page";
}
<style type="text/css">
    [cl-filter-container] .container-date-pickers>div{
        display: inline-block;
        width: 50%;
    }
    
</style>
@section scripts{
    <link href="~/Content/bootstrap.css" rel="stylesheet"/>
    <link href="~/Content/ui-bootstrap-csp.css" rel="stylesheet"/>
    <link href="~/Content/cr-lab-grid.css" rel="stylesheet"/>
    <link href="~/fonts/ionicons.css" rel="stylesheet"/>
    @*<script src="~/Scripts/moment.js"></script>*@
<script src="~/Scripts/moment-with-locales.js"></script>
    <script src="~/Scripts/angular.js"></script>
    <script src="~/Scripts/module/cr-lab-frid.js"></script>
    <script src="~/Scripts/angular-ui/ui-bootstrap.js"></script>

    <script src="~/Scripts/angular-ui/ui-bootstrap-tpls.js"></script>
    <script type="text/javascript">
        (function() {
            'use strict';
          moment.locale(window.navigator.language);
            var app = angular.module('app', ['gridCredoLab']);

            app.controller('global', global);
            global.$inject = ['$scope', 'clGridContainer', '$http'];
            app.filter('formatDate',
                function() {
                    return function(date) {
                        return moment(date).format('L');
                    }
                });
            function global(scope, clGridContainer, http) {
                var id = 1;
                scope.one = '';
                scope.two = '';
                scope.$watchGroup([
                        function() {
                            return scope.one;
                        }, function() {
                            return scope.two;
                        }
                    ],
                    function(newV) {
//                        console.log(newV[0]);
                    });

                scope.first = {};
                scope.first.array = {};
                scope.first.array.data =
                [
                    { id: 1, name: 'vitek', date: new Date(2016, 3, 29) },
                    { id: 2, name: 'kristina', date: new Date(2016, 4, 1) },
                    { id: 3, name: 'alex', date: new Date(2016, 4, 7) },
                    { id: 4, name: 'anna', date: new Date(2016, 3, 12) }
                ];

                scope.index = 'alex';
                scope.get = function() {
                    scope.selctedItem1 = clGridContainer.clGridSelectedItems('name1');
                    scope.selctedItem2 = clGridContainer.clGridSelectedItems('name2');
                }
                scope.sort = function(a) {
                    console.log('sort by field = ' + a);
                }
                scope.add = function() {
                    scope.first.array.data.push({ id: id++, name: 'vitek' });
                }
                scope.openFunction = function() {
                    scope.popup.opened = true;
                }

                scope.openDate = function() {
                    scope.popup.opened = true;
                };
                scope.popup = {
                    modelStartDate: new Date(),
                    modelEndDate: new Date(),
                    openCalStart: false,
                    openCalEnd: false,
                    openCalStartAction: function() {
                        this.openCalStart = true;
                    },
                    openCalEndAction: function() {
                        this.openCalEnd = true;
                    }
                };
                scope.dateOptions = {
                    formatYear: 'yy',
                    maxDate: new Date(2020, 5, 22),
                    minDate: new Date(),
                    startingDay: 1
                };
                console.log(moment.locale());
                scope.remote = function (data) {
                    var request = [];
                    var query = [];
                    for (var i = 0; i < data.length; i++) {
                        request.push($.param(data[i]));
                    }
                    console.log(decodeURIComponent(request.join('&')));
                    http.get('/api/Date?' + request.join('&')).success(function(date) {
                        console.log(date);
                        console.log(date.StartCreatedDate);
                    });
            };
        }


    })();
    </script>
}
<div ng-app="app" ng-controller="global">

    <div cl-grid data="first.array.data" class="row" id="name1" multiselect hide-without-elems server-filter-action="remote">
        @*<div show-without-elems class="text-center">Table is empty</div>*@
        <div cl-header class="row">
            <div cl-caption sortable field="id" class="col-md-2">
                Id
            </div>
            <div cl-caption sortable field="name" class="col-md-5" filter-type="text">
                Name
            </div>
            <div cl-caption sortable field="date" class="col-md-5" filter-type="date" condition-selected="4">
                Date
            </div>
        </div>
        <div cl-body class="row">
            <div class="col-md-2">{{item.id}}</div>
            <!--Your build logic-->
            <div class="col-md-5" ng-style="index==item.name?{'color':'blue'}:{}">
                {{item.name}} - {{index}}
                <i style="font-size: 25px" class="ion-ios-close-empty pull-right" selected></i>
            </div>
            <div class="col-md-5" ng-style="index==item.name?{'color':'blue'}:{}">
                {{item.date|formatDate}}
            </div>
        </div>



    </div>
</div>

<script type="text/ng-template" id="templ">
    <div cl-header local="false" sort-action="sort">
        <div cl-caption sortable field="id" class="col-md-6">Id</div>
        <div cl-caption sortable field="name" class="col-md-6">Name</div>
    </div>
    <div cl-body>
        <div>{{header}}</div>
        <div class="col-md-6">{{item.id}}</div>
        <div class="col-md-6" ng-style="index==item.name?{'color':'blue'}:{}">{{item.name}} - {{index}}</div>
    </div>
</script>

